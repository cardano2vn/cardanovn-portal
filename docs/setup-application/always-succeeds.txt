
addr_test1qp55alwenywwdmhu25us4759na493wsxx7fg2jd4jsa7k6lptedz0pqqe5e2k0v6hemxcsr45hj6qvvqthsat6ps7dzqg5eh86

cardano-cli address key-gen \
--verification-key-file payment2.vkey \
--signing-key-file payment2.skey
  
cardano-cli stake-address key-gen \
--verification-key-file stake2.vkey \
--signing-key-file stake2.skey

cardano-cli address build \
--payment-verification-key-file payment2.vkey \
--stake-verification-key-file stake2.vkey \
--out-file payment2.addr \
--testnet-magic $TESTNET_MAGIC 

giao dich wallet
cardano-cli query utxo --address $(cat payment.addr) --testnet-magic $TESTNET_MAGIC

export txinwallet=91f79c4570efe987a881df18476a036b819f8fa2ee80d922394a090e9731f37e#0 

cardano-cli transaction build \
--alonzo-era \
--testnet-magic ${TESTNET_MAGIC} \
--change-address $(cat payment.addr) \
--tx-in $txinwallet \
--tx-out $(cat payment2.addr)+3000000 \
--out-file tx.build

cardano-cli transaction sign \
--tx-body-file tx.build \
--testnet-magic ${TESTNET_MAGIC} \
--signing-key-file payment.skey \
--out-file tx.signed

cardano-cli transaction submit --tx-file tx.signed --testnet-magic ${TESTNET_MAGIC}



lock ada in SC

B1.

cardano-cli address build \
--payment-script-file alwayssucceeds.plutus \
--testnet-magic ${TESTNET_MAGIC} \
--out-file script.addr

B2
cardano-cli transaction hash-script-data --script-data-value 12 

export scriptdatumhash=5e9d8bac576e8604e7c3526025bc146f5fa178173e3a5592d122687bd785b520

B3

cardano-cli query protocol-parameters \
--testnet-magic ${TESTNET_MAGIC} \
--out-file pparams.json

B4.
cardano-cli query utxo --address $(cat payment.addr) --testnet-magic ${TESTNET_MAGIC}



export TxHashTxIx=936bf9f9ce08ae957632b3cbc666067807bfbc0ccd252d2628d225e7565d3343#0 

cardano-cli transaction build \
--alonzo-era \
--testnet-magic ${TESTNET_MAGIC} \
--change-address $(cat payment2.addr) \
--tx-in $TxHashTxIx \
--tx-out $(cat script.addr)+3081178 \
--tx-out-datum-hash ${scriptdatumhash} \
--protocol-params-file pparams.json \
--out-file tx-script.build

B5
cardano-cli transaction sign \
--tx-body-file tx-script.build \
--signing-key-file payment.skey \
--testnet-magic ${TESTNET_MAGIC} \
--out-file tx-script.signed

B6
cardano-cli transaction submit --testnet-magic ${TESTNET_MAGIC} --tx-file tx-script.signed

B7
cardano-cli query utxo --address $(cat payment.addr) --testnet-magic ${TESTNET_MAGIC}

cardano-cli query utxo --address $(cat script.addr) --testnet-magic ${TESTNET_MAGIC}>>utxo.t

export plutusutxotxin=7fa4cba4d40dccce44eabd74926dc29acfa676ab8448fc3c9b02a0c04d21da12#1 



Unlock ada to wallet
B1

cardano-cli query utxo --address $(cat payment.addr) --testnet-magic ${TESTNET_MAGIC}

export txCollateral=936bf9f9ce08ae957632b3cbc666067807bfbc0ccd252d2628d225e7565d3343#1 

B2
cardano-cli transaction build \
--alonzo-era \
--testnet-magic ${TESTNET_MAGIC} \
--tx-in ${plutusutxotxin} \
--tx-in-script-file alwayssucceeds.plutus \
--tx-in-datum-value 42 \
--tx-in-redeemer-value 12 \
--tx-in-collateral ${txCollateral} \
--change-address $(cat payment.addr) \
--protocol-params-file pparams.json \
--out-file test-alonzo.tx


cardano-cli transaction sign \
--tx-body-file test-alonzo.tx \
--signing-key-file payment.skey \
--testnet-magic ${TESTNET_MAGIC} \
--out-file test-alonzo.signed

cardano-cli transaction submit --testnet-magic ${TESTNET_MAGIC} --tx-file test-alonzo.signed 


cardano-cli query utxo --address $(cat payment.addr) --testnet-magic ${TESTNET_MAGIC}